# 智能水果摊自助结算系统 (Smart Fruit Stall Checkout System)

> 项目位于：`/home/nano/smart_checkout_system/`
> 如果后面的学弟学妹想用这块板子开发可以参考其中的技术栈，因为这个板子十分老旧，很多现代化的模型部署困难，本项目是经过一系列探索后性能较好的一种。

## 1. 项目简介 (Introduction)

本项目是一个基于 **NVIDIA Jetson Nano** 平台的计算机视觉自助结算系统，旨在模拟一个现代化、无接触的水果摊购物体验。系统通过实时视频流，利用深度学习和传统图像处理技术，实现了自动商品识别与手势指令交互两大核心功能。用于2025年秋季DSP验收。

用户只需将选购的水果在摄像头前展示，系统即可自动将其加入虚拟购物车。随后，用户可以通过一系列直观的手势（如张手、点赞、指向）来管理购物车（撤销、清空）和完成结账流程，全程无需接触任何实体按键或屏幕，提供了一种新颖、卫生且高效的交互方式。

本项目充分利用了 Jetson Nano 的 GPU 加速能力，并通过精心的软件架构设计，在保证功能完整性的同时，实现了流畅、高帧率的用户体验，是一个集成了AI应用、硬件交互和软件工程实践的综合性嵌入式项目。

## 2. 功能亮点 (Key Features)

*   🍎 **自动商品识别 (出现即添加)**: 模拟超市收银台的“扫码”行为。当一个水果首次出现在摄像头画面中时，系统会立即识别其种类并自动加入购物车。将水果移出再移入，即可累加数量。
*   🖐️ **丰富的无接触手势交互**:
    *   **撤销 (Undo)**: 做出 **张开手掌 (open_palm)** 手势，即可撤销上一次添加的商品，方便修正错误。
    *   **清空 (Clear Cart)**: 做出 **点赞 (thumb_up)** 手势，可以一键清空购物车内的所有商品。
    *   **结账 (Checkout)**: 做出 **指向 (pointing)** 手势，系统会计算总价并弹出支付二维码，进入结账模式。
    *   **完成/取消结账 (Finish/Cancel)**: 在结账界面，再次做出 **点赞 (thumb_up)** 手势，即可完成交易并清空购物车，为下一位顾客做好准备。
*   🗣️ **实时语音反馈 (Voice Announcer)**: 系统的每一步关键操作，如“添加商品”、“清空购物车”、“播报总价”等，都会有清晰的语音提示。这极大地增强了交互的确认感和用户体验，使系统感觉更智能、更人性化。
*   🚀 **高性能与流畅体验**:
    *   **双摄像头架构**: 物理上分离了水果识别（CSI-1）和手势识别（CSI-0）的数据流，避免了单摄像头下视野遮挡和焦点切换的问题。主循环依次处理两个数据流，保证了硬件访问的稳定性。
    *   **GPU加速推理**: 水果识别任务利用 NVIDIA TensorRT 引擎在 GPU 上执行，推理速度极快，保证了主UI界面的刷新率稳定在 40-50 FPS，视觉效果流畅。
    *   **CPU负载优化**: 对CPU密集型的手势识别任务采用了帧间隔采样技术（每3帧处理1次），在几乎不影响响应速度的前提下，将CPU负载降低了约66%，有效避免了卡顿和掉帧，保证了手势骨骼动画的跟手性。
*   🎨 **专业且信息丰富的用户界面 (UI)**:
    *   **多窗口布局**: 清晰地划分了主摄像头（水果）画面、手势识别小窗口和动态更新的购物车列表。
    *   **实时数据显示**: 购物车内的商品、数量、单价、总价以及当前识别到的手势都实时显示在屏幕上，信息一目了然。
    *   **美观一致**: 统一的颜色、字体和布局设计，提供了专业、美观的视觉体验。

## 3. 技术架构与实现 (Tech Stack & Architecture)

### 3.1 硬件平台
*   **核心**: NVIDIA Jetson Nano Developer Kit
*   **视觉输入**: 2 x CSI 摄像头 (推荐 Raspberry Pi Camera Module V2)

### 3.2 软件技术栈
*   **操作系统**: Jetson-based Linux (Ubuntu 18.04)
*   **编程语言**: Python 3.6
*   **核心AI框架**:
    *   `jetson-inference`: 用于高性能、GPU加速的物体检测。它在后台自动将 ONNX 模型转换为高度优化的 TensorRT 引擎，是项目高性能的基石。
    *   `mediapipe`: Google 出品的跨平台机器学习应用库，本项目使用其强大的手部关键点检测功能。
*   **关键Python库**:
    *   `OpenCV`: 用于图像的预处理（颜色空间转换、镜像翻转）和所有UI元素的绘制。
    *   `numpy`: 用于高效的图像数组操作，是计算机视觉项目的基础。
    *   `pyttsx3`: 用于实现完全离线的文本转语音功能，保证了在任何网络环境下语音播报的可靠性和即时性。
*   **底层系统工具**:
    *   `eSpeak`: 作为 `pyttsx3` 在 Linux 系统下的底层语音合成引擎。

### 3.3 模块化设计
项目遵循“高内聚、低耦合”的设计原则，将核心功能拆分为5个独立的Python模块，由 `main.py` 统一调度。
